<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
  <title>Seamless AI - Login</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Dark theme (default) */
    :root {
      --bg: #09090b;
      --text: #fafafa;
      --text-logo: #fafafa;
      --btn-shadow: 0 0 0 0.5px rgb(23, 23, 23), inset 0 0 0 1px rgba(255, 255, 255, 0.14);
    }

    /* Light theme */
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #ffffff;
        --text: #09090b;
        --text-logo: #09090b;
        --btn-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(0, 0, 0, 0.1);
      }
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      -webkit-app-region: drag;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      -webkit-app-region: no-drag;
    }

    .logo {
      height: 72px;
      width: auto;
    }

    .logo .text-path {
      fill: var(--text-logo);
    }

    .login-btn {
      height: 32px;
      padding: 0 12px;
      background: hsl(228 100% 50%);
      color: #fafafa;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.15s ease, transform 0.15s ease;
      box-shadow: var(--btn-shadow);
    }

    .login-btn:hover {
      background: hsl(228 100% 45%);
    }

    .login-btn:active {
      transform: scale(0.97);
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- LogoWithText SVG -->
    <!-- Seamless AI Text Logo -->
    <div style="text-align: center; margin-bottom: 8px;">
      <h1
        style="font-size: 32px; font-weight: 700; background: linear-gradient(135deg, var(--text), var(--text-logo)); -webkit-background-clip: text; background-clip: text; color: transparent; margin-bottom: 4px;">
        Seamless AI</h1>
      <p style="font-size: 14px; color: var(--text); opacity: 0.7; font-weight: 400;">Ship Faster And Launch Faster</p>
    </div>
    <button class="login-btn" id="loginBtn">Sign in</button>
  </div>
  <script>
    console.log('Login page loaded');
    console.log('window.desktopApi:', window.desktopApi);

    // Listen for auth success from main process (via deep link)
    // This ensures UI updates even if deep link arrives before click handler completes
    if (window.desktopApi && window.desktopApi.onAuthSuccess) {
      window.desktopApi.onAuthSuccess(function (user) {
        console.log('[Login] Auth success received:', user?.email);
        // Window will be reloaded by main process, no UI change needed
      });
    }

    document.getElementById('loginBtn').addEventListener('click', function () {
      console.log('Sign in clicked');
      console.log('desktopApi available:', !!window.desktopApi);

      if (window.desktopApi && window.desktopApi.startAuthFlow) {
        console.log('Calling startAuthFlow...');
        window.desktopApi.startAuthFlow();
      } else {
        console.error('Desktop API not available');
        alert('Desktop API not available. Please restart the app.');
      }
    });
  </script>
</body>

</html>